---
import penguins from "../assets/penguins.json";

// Déterminer automatiquement la liste des espèces
const species = [...new Set(penguins.map((p) => p.species))].sort();
---

<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Penguins - Toutes les espèces</title>
</head>
<body class="max-w-6xl mx-auto px-6 py-12 bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 min-h-screen">
  <div class="mb-12">
    <h1 class="text-4xl font-bold bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 bg-clip-text text-transparent mb-3">
      Graphiques de tous les manchots
    </h1>
    <p class="text-slate-600">Explorez les données par espèce</p>
  </div>
  
  <div class="mb-10">
    <label for="species-select" class="block text-sm font-medium text-slate-700 mb-2">
      Filtrer par espèce
    </label>
    <select 
      id="species-select" 
      class="w-full max-w-sm px-4 py-3 bg-white/80 backdrop-blur-sm border border-slate-200 rounded-xl shadow-sm text-slate-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
    >
      <option value="">Toutes les espèces</option>
      {species.map((s) => (
        <option value={s}>{s}</option>
      ))}
    </select>
  </div>

  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
    {species.map((s) => (
      <div class="group relative bg-white/70 backdrop-blur-md border border-white/20 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1 species-card" data-species={s}>
        <div class="absolute inset-0 bg-gradient-to-br from-blue-500/10 to-purple-500/10 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
        
        <h2 class="relative text-xl font-semibold text-slate-800 mb-5">{s}</h2>
        
        <div class="relative space-y-3">
          <a 
            href={`/rendu-dynamique/${s}`} 
            class="block px-5 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white text-sm font-medium text-center rounded-xl shadow-md hover:shadow-lg hover:scale-105 transition-all duration-200"
          >
            Graphique dynamique
          </a>
          <a 
            href={`/rendu-statique/${s}`} 
            class="block px-5 py-3 bg-white border-2 border-slate-200 text-slate-700 text-sm font-medium text-center rounded-xl hover:border-indigo-400 hover:bg-slate-50 transition-all duration-200"
          >
            Graphique statique
          </a>
        </div>
      </div>
    ))}
  </div>

  <script>
    const select = document.getElementById('species-select');
    const cards = document.querySelectorAll('.species-card');
    
    select.addEventListener('change', (e) => {
      const selectedSpecies = e.target.value;
      cards.forEach(card => {
        if (selectedSpecies === '' || card.dataset.species === selectedSpecies) {
          card.style.display = '';
        } else {
          card.style.display = 'none';
        }
      });
    });
  </script>
</body>
</html>
